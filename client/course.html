<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Course Registration</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<script>
    const ID = parseInt(localStorage.getItem("ID"))
    const api_url = 
      `http://localhost:5000/mycourses/${ID}`;
  
// Defining async function
async function getapi(url) {
    
    // Storing response
    const response = await fetch(url);
    
    // Storing data in form of JSON
    var data = await response.json();
    show(data);
}
getapi(api_url);

function show(data) {
    let tab = ``;
    data.forEach((r) => {
        tab += `<tr> 
        <td>${r.id} </td>
        <td>${r.name}</td>
        <td>${r.IC_ID}</td> 
        <td>${r.IC_name}</td>
        <td>${r.capacity}</td>          
        </tr>`;
    });
    
    console.log(tab)
    document.getElementById("tableData").innerHTML = tab;
}
</script>

<body>
    <table id="all" border = 1>
        <tr>
        <th colspan  = 2><div class = "Welcome"><h1>Welcome "NAME"</h1><br></div></th>
        </tr>
        <tr>
        <th>
        <div class = "Current"><h2>Your Current Courses</h2></div>
            <table id="curr" class="table">
                <thead id = "thead" class="thead-dark">
                <tr>
                    <th>Course ID</th>
                    <th>Course name</th>
                    <th>Course IC ID</th>
                    <th>Course IC name</th>
                    <th>Capacity</th>
                </tr>
                </thead>

                <tbody id="tableData">
                </tbody>
            </table>
        </th>
        <th>
            <table id="buttons" border = 2>
                <tr><th><button id="AddButton" class="button" >Add Courses</button>

                    <script type="text/javascript">
                        document.getElementById("AddButton").onclick = function () {
                            location.href = 'http://127.0.0.1:5500/client/add.html';
                        };
                    </script></th></tr>
                <tr><th><button id="WithButton" class="button" >Withdraw Courses</button>

                    <script type="text/javascript">
                        document.getElementById("WithButton").onclick = function () {
                            location.href = 'http://127.0.0.1:5500/client/with.html';
                        };
                    </script></th></tr>
                <tr><th><button id="SubButton" class="button" >Substitute Courses</button>

                    <script type="text/javascript">
                        document.getElementById("SubButton").onclick = function () {
                            location.href = 'http://127.0.0.1:5500/client/sub.html';
                        };
                    </script></th></tr>
            </table>
        </th>
    </table>
</body>
</html>
